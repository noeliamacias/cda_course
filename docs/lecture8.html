<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

  <!--radix_placeholder_meta_tags-->
  <title>CDA course: CDA Lecture 8</title>
  
  
  
  
  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="CDA course: CDA Lecture 8"/>
  <meta property="og:type" content="article"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="CDA course"/>
  
  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="CDA course: CDA Lecture 8"/>
  
  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","output"]}},"value":[{"type":"character","attributes":{},"value":["CDA Lecture 8"]},{"type":"character","attributes":{},"value":["distill::distill_article"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  
  <script type="application/javascript">
  
    window.headroom_prevent_pin = false;
  
    window.document.addEventListener("DOMContentLoaded", function (event) {
  
      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');
  
      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });
  
      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });
  
      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>
  
  <style type="text/css">
  
  /* Theme (user-documented overrideables for nav appearance) */
  
  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #455a64;
    font-size: 15px;
    font-weight: 300;
  }
  
  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }
  
  .distill-site-nav a:hover {
    color: white;
  }
  
  @media print {
    .distill-site-nav {
      display: none;
    }
  }
  
  .distill-site-header {
  
  }
  
  .distill-site-footer {
  
  }
  
  
  /* Site Header */
  
  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }
  
  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }
  
  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }
  
  
  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }
  
  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }
  
  .distill-site-header .title {
    font-size: 18px;
  }
  
  .distill-site-header .logo {
    padding: 0;
  }
  
  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }
  
  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }
  
  
  
  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }
  
  
  .distill-site-header .nav-toggle {
    display: none;
  }
  
  .nav-dropdown {
    display: inline-block;
    position: relative;
  }
  
  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }
  
  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }
  
  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .nav-dropdown-active {
    display: block;
  }
  
  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }
  
  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }
  
  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }
  
  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }
  
  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }
  
  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }
  
  
  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative;}
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }
  
  /* Site Footer */
  
  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }
  
  /* Headroom */
  
  d-title {
    padding-top: 6rem;
  }
  
  @media print {
    d-title {
      padding-top: 4rem;
    }
  }
  
  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }
  
  .headroom--transition {
    transition: all .4s ease-in-out;
  }
  
  .headroom--unpinned {
    top: -100px;
  }
  
  .headroom--pinned {
    top: 0;
  }
  
  </style>
  
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->
  
  <style type="text/css">
  
  body {
    background-color: white;
  }
  
  .pandoc-table {
    width: 100%;
  }
  
  .pandoc-table>caption {
    margin-bottom: 10px;
  }
  
  .pandoc-table th:not([align]) {
    text-align: left;
  }
  
  .pagedtable-footer {
    font-size: 15px;
  }
  
  .html-widget {
    margin-bottom: 2.0em;
  }
  
  .l-screen-inset {
    padding-right: 16px;
  }
  
  .l-screen .caption {
    margin-left: 10px;
  }
  
  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .shaded-content {
    background: white;
  }
  
  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }
  
  .hidden {
    display: none !important;
  }
  
  d-article {
    padding-bottom: 30px;
  }
  
  d-appendix {
    padding-top: 30px;
  }
  
  d-article>p>img {
    width: 100%;
  }
  
  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }
  
  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  /* CSS for table of contents */
  
  .d-toc {
    color: rgba(0,0,0,0.8);
    font-size: 0.8em;
    line-height: 1em;
  }
  
  .d-toc-header {
    font-size: 0.6rem;
    font-weight: 400;
    color: rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
    margin-top: 0;
    margin-bottom: 1.3em;
  }
  
  .d-toc a {
    border-bottom: none;
  }
  
  .d-toc ul {
    padding-left: 0;
  }
  
  .d-toc li>ul {
    padding-top: 0.8em;
    padding-left: 16px;
    margin-bottom: 0.6em;
  }
  
  .d-toc ul,
  .d-toc li {
    list-style-type: none;
  }
  
  .d-toc li {
    margin-bottom: 0.9em;
  }
  
  .d-toc-separator {
    margin-top: 20px;
    margin-bottom: 2em;
  }
  
  .d-article-with-toc {
    border-top: none;
    padding-top: 0;
  }
  
  
  
  /* Tweak code blocks (note that this CSS is repeated above in an injection
     into the d-code shadow dom) */
  
  d-code {
    overflow-x: auto !important;
  }
  
  pre.d-code code.d-code {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }
  
  pre.text-output {
  
    font-size: 12px;
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  @media(min-width: 768px) {
  
  d-code {
    overflow-x: visible !important;
  }
  
  pre.d-code code.d-code  {
      padding-left: 18px;
      font-size: 14px;
  }
  pre.text-output {
    font-size: 14px;
  }
  }
  
  /* Figure */
  
  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }
  
  .figure img {
    width: 100%;
  }
  
  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }
  
  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }
  
  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }
  
  
  
  /* Tweak 1000px media break to show more text */
  
  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }
  
    .grid {
      grid-column-gap: 16px;
    }
  
    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }
  
  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }
  
    .grid {
      grid-column-gap: 32px;
    }
  }
  
  
  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */
  
  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  
  
  /* Social footer */
  
  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }
  
  .disqus-comments {
    margin-right: 30px;
  }
  
  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }
  
  #disqus_thread {
    margin-top: 30px;
  }
  
  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }
  
  .article-sharing a:hover {
    border-bottom: none;
  }
  
  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .subscribe p {
    margin-bottom: 0.5em;
  }
  
  
  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }
  
  
  /* Improve display for browsers without grid (IE/Edge <= 15) */
  
  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }
  
  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }
  
  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }
  
  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }
  
  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }
  
  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }
  
  
  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }
  
  .downlevel .footnotes ol {
    padding-left: 13px;
  }
  
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }
  
  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }
  
  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }
  
  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  </style>
  
  <script type="application/javascript">
  
  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }
  
  // show body when load is complete
  function on_load_complete() {
  
    // set body to visible
    document.body.style.visibility = 'visible';
  
    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }
  
    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }
  
  function init_distill() {
  
    init_common();
  
    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);
  
    // create d-title
    $('.d-title').changeElementType('d-title');
  
    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);
  
    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();
  
    // move posts container into article
    $('.posts-container').appendTo($('d-article'));
  
    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');
  
    // create d-bibliography
    var bibliography = $('<d-bibliography></d-bibliography>');
    $('#distill-bibliography').wrap(bibliography);
  
    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;
  
    // replace citations with <d-cite>
    $('.citation').each(function(i, val) {
      appendix = true;
      var cites = $(this).attr('data-cites').split(" ");
      var dt_cite = $('<d-cite></d-cite>');
      dt_cite.attr('key', cites.join());
      $(this).replaceWith(dt_cite);
    });
    // remove refs
    $('#refs').remove();
  
    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();
  
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-toc a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });
  
    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');
  
    // replace code blocks with d-code
    $('pre>code').each(function(i, val) {
      var code = $(this);
      var pre = code.parent();
      var clz = "";
      var language = pre.attr('class');
      if (language) {
        // map unknown languages to "clike" (without this they just dissapear)
        if ($.inArray(language, ["bash", "clike", "css", "go", "html",
                                 "javascript", "js", "julia", "lua", "markdown",
                                 "markup", "mathml", "python", "svg", "xml"]) == -1)
          language = "clike";
        language = ' language="' + language + '"';
        var dt_code = $('<d-code block' + language + clz + '></d-code>');
        dt_code.text(code.text());
        pre.replaceWith(dt_code);
      } else {
        code.addClass('text-output').unwrap().changeElementType('pre');
      }
    });
  
    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {
  
      // capture layout
      var layout = $(this).attr('data-layout');
  
      // apply layout to markdown level block elements
      var elements = $(this).children().not('d-code, pre.text-output, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });
  
  
      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });
  
    // load distill framework
    load_distill_framework();
  
    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {
  
      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;
  
      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');
  
      // table of contents
      if (have_authors) // adjust border if we are in authors
        $('.d-toc').parent().addClass('d-article-with-toc');
  
      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');
  
      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }
  
      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');
  
      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");
  
      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }
  
       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }
  
      // inject pre code styles (can't do this with a global stylesheet b/c a shadow root is used)
      $('d-code').each(function(i, val) {
        var style = document.createElement('style');
        style.innerHTML = 'pre code { padding-left: 10px; font-size: 12px; border-left: 2px solid rgba(0,0,0,0.1); } ' +
                          '@media(min-width: 768px) { pre code { padding-left: 18px; font-size: 14px; } }';
        if (this.shadowRoot)
          this.shadowRoot.appendChild(style);
      });
  
      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();
  
      // clear polling timer
      clearInterval(tid);
  
      // show body now that everything is ready
      on_load_complete();
    }
  
    var tid = setInterval(distill_post_process, 50);
    distill_post_process();
  
  }
  
  function init_downlevel() {
  
    init_common();
  
     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));
  
    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
  
    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();
  
    // remove toc
    $('.d-toc-header').remove();
    $('.d-toc').remove();
    $('.d-toc-separator').remove();
  
    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });
  
  
    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);
  
    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);
  
    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();
  
    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();
  
    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));
  
    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });
  
    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));
  
    $('body').addClass('downlevel');
  
    on_load_complete();
  }
  
  
  function init_common() {
  
    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};
  
        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });
  
        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);
  
    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});
  
    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });
  
      }
    });
  
    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });
  
    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }
  
    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');
  
    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");
  
    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();
  
    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });
  
  </script>
  
  <!--/radix_placeholder_distill-->
  <link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
  <script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
  <script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"CDA Lecture 8","authors":[]}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="index.html" class="title">CDA course</a>
</div>
<div class="nav-right">
<a href="index.html">Home</a>
<a href="about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>CDA Lecture 8</h1>

</div>


<div class="d-article">
<p>To use this notebook, open <a href="https://github.com/vzemlys/cda_course/blob/master/lecture8.Rmd">it</a> in RStudio and run the code in the blocks.</p>
<p>The purpose of this lecture is to become acquainted with certain features of linear regression</p>
<p>We will use the same dataset from the lecture 7</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
library(AER)
library(rmarkdown)
library(dplyr)
library(ggplot2)
data(&quot;GrowthDJ&quot;)
dj &lt;- GrowthDJ
dj %&gt;% paged_table</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["oil"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["inter"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["oecd"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["gdp60"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["gdp85"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["gdpgrowth"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["popgrowth"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["invest"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["school"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["literacy60"],"name":[10],"type":["dbl"],"align":["right"]}],"data":[{"1":"no","2":"yes","3":"no","4":"2485","5":"4371","6":"4.8","7":"2.6","8":"24.1","9":"4.5","10":"10","_rn_":"1"},{"1":"no","2":"no","3":"no","4":"1588","5":"1171","6":"0.8","7":"2.1","8":"5.8","9":"1.8","10":"5","_rn_":"2"},{"1":"no","2":"no","3":"no","4":"1116","5":"1071","6":"2.2","7":"2.4","8":"10.8","9":"1.8","10":"5","_rn_":"3"},{"1":"no","2":"yes","3":"no","4":"959","5":"3671","6":"8.6","7":"3.2","8":"28.3","9":"2.9","10":"NA","_rn_":"4"},{"1":"no","2":"no","3":"no","4":"529","5":"857","6":"2.9","7":"0.9","8":"12.7","9":"0.4","10":"2","_rn_":"5"},{"1":"no","2":"no","3":"no","4":"755","5":"663","6":"1.2","7":"1.7","8":"5.1","9":"0.4","10":"14","_rn_":"6"},{"1":"no","2":"yes","3":"no","4":"889","5":"2190","6":"5.7","7":"2.1","8":"12.8","9":"3.4","10":"19","_rn_":"7"},{"1":"no","2":"no","3":"no","4":"838","5":"789","6":"1.5","7":"1.7","8":"10.5","9":"1.4","10":"7","_rn_":"8"},{"1":"no","2":"no","3":"no","4":"908","5":"462","6":"-0.9","7":"1.9","8":"6.9","9":"0.4","10":"6","_rn_":"9"},{"1":"no","2":"no","3":"no","4":"1009","5":"2624","6":"6.2","7":"2.4","8":"28.8","9":"3.8","10":"16","_rn_":"10"},{"1":"no","2":"no","3":"no","4":"907","5":"2160","6":"6.0","7":"2.5","8":"16.3","9":"7.0","10":"26","_rn_":"11"},{"1":"no","2":"yes","3":"no","4":"533","5":"608","6":"2.8","7":"2.3","8":"5.4","9":"1.1","10":"15","_rn_":"12"},{"1":"yes","2":"no","3":"no","4":"1307","5":"5350","6":"7.0","7":"1.4","8":"22.1","9":"2.6","10":"NA","_rn_":"13"},{"1":"yes","2":"no","3":"no","4":"799","5":"NA","6":"3.6","7":"NA","8":"18.1","9":"1.5","10":"NA","_rn_":"14"},{"1":"no","2":"no","3":"no","4":"1009","5":"727","6":"1.0","7":"2.3","8":"9.1","9":"4.7","10":"27","_rn_":"15"},{"1":"yes","2":"no","3":"no","4":"746","5":"869","6":"2.2","7":"1.6","8":"10.9","9":"NA","10":"7","_rn_":"16"},{"1":"no","2":"yes","3":"no","4":"1386","5":"1704","6":"5.1","7":"4.3","8":"12.4","9":"2.3","10":"5","_rn_":"17"},{"1":"no","2":"yes","3":"no","4":"944","5":"1329","6":"4.8","7":"3.4","8":"17.4","9":"2.4","10":"20","_rn_":"18"},{"1":"yes","2":"no","3":"no","4":"431","5":"1483","6":"6.8","7":"1.9","8":"12.6","9":"2.0","10":"NA","_rn_":"19"},{"1":"no","2":"no","3":"no","4":"863","5":"944","6":"3.3","7":"3.0","8":"21.5","9":"2.5","10":"9","_rn_":"20"},{"1":"no","2":"yes","3":"no","4":"1194","5":"975","6":"1.4","7":"2.2","8":"7.1","9":"2.6","10":"50","_rn_":"21"},{"1":"no","2":"yes","3":"no","4":"455","5":"823","6":"4.8","7":"2.4","8":"13.2","9":"0.6","10":"25","_rn_":"22"},{"1":"no","2":"yes","3":"no","4":"737","5":"710","6":"2.1","7":"2.2","8":"7.3","9":"1.0","10":"3","_rn_":"23"},{"1":"no","2":"no","3":"no","4":"777","5":"1038","6":"3.3","7":"2.2","8":"25.6","9":"1.0","10":"5","_rn_":"24"},{"1":"no","2":"no","3":"no","4":"1973","5":"2967","6":"4.2","7":"2.6","8":"17.1","9":"7.3","10":"NA","_rn_":"25"},{"1":"no","2":"yes","3":"no","4":"1030","5":"2348","6":"5.8","7":"2.5","8":"8.3","9":"3.6","10":"14","_rn_":"26"},{"1":"no","2":"no","3":"no","4":"1420","5":"1035","6":"1.4","7":"2.7","8":"6.1","9":"0.7","10":"11","_rn_":"27"},{"1":"no","2":"no","3":"no","4":"539","5":"841","6":"4.4","7":"2.6","8":"10.3","9":"0.5","10":"1","_rn_":"28"},{"1":"no","2":"yes","3":"no","4":"1055","5":"1186","6":"2.8","7":"2.4","8":"12.0","9":"2.3","10":"15","_rn_":"29"},{"1":"no","2":"no","3":"no","4":"460","5":"696","6":"4.5","7":"2.8","8":"7.9","9":"0.4","10":"16","_rn_":"30"},{"1":"no","2":"yes","3":"no","4":"1392","5":"1450","6":"2.5","7":"2.3","8":"9.6","9":"1.7","10":"6","_rn_":"31"},{"1":"no","2":"no","3":"no","4":"511","5":"805","6":"3.4","7":"1.6","8":"10.9","9":"1.7","10":"7","_rn_":"32"},{"1":"no","2":"no","3":"no","4":"901","5":"657","6":"1.8","7":"3.1","8":"13.8","9":"1.1","10":"2","_rn_":"33"},{"1":"no","2":"yes","3":"no","4":"4768","5":"7064","6":"3.9","7":"2.3","8":"21.6","9":"3.0","10":"57","_rn_":"34"},{"1":"no","2":"no","3":"no","4":"1254","5":"1038","6":"1.8","7":"2.6","8":"13.2","9":"2.0","10":"13","_rn_":"35"},{"1":"yes","2":"no","3":"no","4":"817","5":"NA","6":"7.2","7":"NA","8":"17.7","9":"3.7","10":"NA","_rn_":"36"},{"1":"no","2":"yes","3":"no","4":"383","5":"710","6":"5.3","7":"2.9","8":"18.0","9":"0.5","10":"10","_rn_":"37"},{"1":"no","2":"no","3":"no","4":"777","5":"978","6":"3.4","7":"2.5","8":"15.5","9":"2.9","10":"10","_rn_":"38"},{"1":"no","2":"yes","3":"no","4":"1623","5":"3661","6":"5.6","7":"2.4","8":"13.8","9":"4.3","10":"16","_rn_":"39"},{"1":"no","2":"no","3":"no","4":"601","5":"667","6":"3.5","7":"3.1","8":"4.1","9":"1.1","10":"35","_rn_":"40"},{"1":"no","2":"no","3":"no","4":"594","5":"412","6":"0.9","7":"2.4","8":"6.5","9":"3.6","10":"31","_rn_":"41"},{"1":"no","2":"yes","3":"no","4":"1410","5":"1217","6":"2.1","7":"2.7","8":"31.7","9":"2.4","10":"29","_rn_":"42"},{"1":"no","2":"yes","3":"no","4":"1187","5":"2107","6":"5.1","7":"2.8","8":"21.1","9":"4.4","10":"39","_rn_":"43"},{"1":"yes","2":"no","3":"no","4":"1224","5":"NA","6":"1.6","7":"NA","8":"6.9","9":"0.9","10":"8","_rn_":"44"},{"1":"yes","2":"no","3":"no","4":"NA","5":"NA","6":"NA","7":"NA","8":"30.0","9":"12.1","10":"NA","_rn_":"45"},{"1":"no","2":"yes","3":"no","4":"846","5":"1221","6":"4.0","7":"2.6","8":"6.8","9":"3.2","10":"22","_rn_":"46"},{"1":"no","2":"yes","3":"no","4":"517","5":"1031","6":"4.5","7":"1.7","8":"11.4","9":"3.5","10":"60","_rn_":"47"},{"1":"no","2":"yes","3":"no","4":"3085","5":"13372","6":"8.9","7":"3.0","8":"19.9","9":"7.2","10":"70","_rn_":"48"},{"1":"no","2":"yes","3":"no","4":"978","5":"1339","6":"3.6","7":"2.4","8":"16.8","9":"5.1","10":"28","_rn_":"49"},{"1":"yes","2":"no","3":"no","4":"3606","5":"7400","6":"6.3","7":"3.4","8":"18.4","9":"6.5","10":"16","_rn_":"50"},{"1":"yes","2":"no","3":"no","4":"4916","5":"5626","6":"3.8","7":"3.2","8":"16.2","9":"7.4","10":"18","_rn_":"51"},{"1":"no","2":"yes","3":"no","4":"4802","5":"10450","6":"5.9","7":"2.8","8":"28.5","9":"9.5","10":"84","_rn_":"52"},{"1":"no","2":"yes","3":"yes","4":"3493","5":"13893","6":"6.8","7":"1.2","8":"36.0","9":"10.9","10":"98","_rn_":"53"},{"1":"no","2":"yes","3":"no","4":"2183","5":"4312","6":"5.4","7":"2.7","8":"17.6","9":"10.8","10":"32","_rn_":"54"},{"1":"no","2":"yes","3":"no","4":"1285","5":"4775","6":"7.9","7":"2.7","8":"22.3","9":"10.2","10":"71","_rn_":"55"},{"1":"yes","2":"no","3":"no","4":"77881","5":"25635","6":"2.4","7":"6.8","8":"9.5","9":"9.6","10":"47","_rn_":"56"},{"1":"no","2":"yes","3":"no","4":"2154","5":"5788","6":"7.1","7":"3.2","8":"23.2","9":"7.3","10":"53","_rn_":"57"},{"1":"no","2":"no","3":"no","4":"833","5":"974","6":"2.6","7":"2.0","8":"5.9","9":"2.3","10":"9","_rn_":"58"},{"1":"yes","2":"no","3":"no","4":"NA","5":"15584","6":"NA","7":"3.3","8":"15.6","9":"2.7","10":"NA","_rn_":"59"},{"1":"no","2":"yes","3":"no","4":"1077","5":"2175","6":"5.8","7":"3.0","8":"12.2","9":"3.0","10":"15","_rn_":"60"},{"1":"no","2":"yes","3":"no","4":"1668","5":"2430","6":"4.5","7":"3.0","8":"14.9","9":"10.6","10":"72","_rn_":"61"},{"1":"yes","2":"no","3":"no","4":"6731","5":"11057","6":"6.1","7":"4.1","8":"12.8","9":"3.1","10":"3","_rn_":"62"},{"1":"no","2":"yes","3":"no","4":"2793","5":"14678","6":"9.2","7":"2.6","8":"32.2","9":"9.0","10":"83","_rn_":"63"},{"1":"no","2":"yes","3":"no","4":"1794","5":"2482","6":"3.7","7":"2.4","8":"14.8","9":"8.3","10":"75","_rn_":"64"},{"1":"no","2":"yes","3":"no","4":"2382","5":"6042","6":"6.7","7":"3.0","8":"15.9","9":"8.8","10":"30","_rn_":"65"},{"1":"yes","2":"no","3":"no","4":"NA","5":"NA","6":"8.0","7":"NA","8":"20.7","9":"NA","10":"NA","_rn_":"66"},{"1":"no","2":"yes","3":"no","4":"1308","5":"3220","6":"6.7","7":"3.1","8":"18.0","9":"4.4","10":"68","_rn_":"67"},{"1":"yes","2":"no","3":"no","4":"NA","5":"18513","6":"NA","7":"NA","8":"26.5","9":"NA","10":"NA","_rn_":"68"},{"1":"yes","2":"no","3":"no","4":"NA","5":"1918","6":"NA","7":"2.5","8":"17.2","9":"0.6","10":"3","_rn_":"69"},{"1":"no","2":"yes","3":"yes","4":"5939","5":"13327","6":"3.6","7":"0.4","8":"23.4","9":"8.0","10":"99","_rn_":"70"},{"1":"no","2":"yes","3":"yes","4":"6789","5":"14290","6":"3.5","7":"0.5","8":"23.4","9":"9.3","10":"99","_rn_":"71"},{"1":"yes","2":"no","3":"no","4":"2948","5":"NA","6":"5.2","7":"NA","8":"31.2","9":"8.2","10":"NA","_rn_":"72"},{"1":"no","2":"yes","3":"yes","4":"8551","5":"16491","6":"3.2","7":"0.6","8":"26.6","9":"10.7","10":"99","_rn_":"73"},{"1":"no","2":"yes","3":"yes","4":"6527","5":"13779","6":"3.7","7":"0.7","8":"36.9","9":"11.5","10":"99","_rn_":"74"},{"1":"no","2":"yes","3":"yes","4":"7215","5":"15027","6":"3.9","7":"1.0","8":"26.2","9":"8.9","10":"99","_rn_":"75"},{"1":"no","2":"yes","3":"yes","4":"7695","5":"15297","6":"3.3","7":"0.5","8":"28.5","9":"8.4","10":"99","_rn_":"76"},{"1":"no","2":"yes","3":"yes","4":"2257","5":"6868","6":"5.1","7":"0.7","8":"29.3","9":"7.9","10":"81","_rn_":"77"},{"1":"yes","2":"no","3":"no","4":"8091","5":"NA","6":"3.9","7":"NA","8":"29.0","9":"10.2","10":"NA","_rn_":"78"},{"1":"no","2":"yes","3":"yes","4":"4411","5":"8675","6":"3.8","7":"1.1","8":"25.9","9":"11.4","10":"98","_rn_":"79"},{"1":"no","2":"yes","3":"yes","4":"4913","5":"11082","6":"3.8","7":"0.6","8":"24.9","9":"7.1","10":"91","_rn_":"80"},{"1":"yes","2":"no","3":"no","4":"9015","5":"NA","6":"2.8","7":"NA","8":"26.9","9":"5.0","10":"NA","_rn_":"81"},{"1":"yes","2":"no","3":"no","4":"2293","5":"NA","6":"6.0","7":"NA","8":"30.9","9":"7.1","10":"NA","_rn_":"82"},{"1":"no","2":"yes","3":"yes","4":"7689","5":"13177","6":"3.6","7":"1.4","8":"25.8","9":"10.7","10":"99","_rn_":"83"},{"1":"no","2":"yes","3":"yes","4":"7938","5":"19723","6":"4.3","7":"0.7","8":"29.1","9":"10.0","10":"99","_rn_":"84"},{"1":"no","2":"yes","3":"yes","4":"2272","5":"5827","6":"4.4","7":"0.6","8":"22.5","9":"5.8","10":"62","_rn_":"85"},{"1":"no","2":"yes","3":"yes","4":"3766","5":"9903","6":"4.9","7":"1.0","8":"17.7","9":"8.0","10":"87","_rn_":"86"},{"1":"no","2":"yes","3":"yes","4":"7802","5":"15237","6":"3.1","7":"0.4","8":"24.5","9":"7.9","10":"99","_rn_":"87"},{"1":"no","2":"yes","3":"yes","4":"10308","5":"15881","6":"2.5","7":"0.8","8":"29.7","9":"4.8","10":"99","_rn_":"88"},{"1":"no","2":"yes","3":"yes","4":"2274","5":"4444","6":"5.2","7":"2.5","8":"20.2","9":"5.5","10":"38","_rn_":"89"},{"1":"no","2":"yes","3":"yes","4":"7634","5":"13331","6":"2.5","7":"0.3","8":"18.4","9":"8.9","10":"99","_rn_":"90"},{"1":"yes","2":"no","3":"no","4":"3165","5":"NA","6":"4.8","7":"NA","8":"19.5","9":"12.1","10":"NA","_rn_":"91"},{"1":"no","2":"yes","3":"yes","4":"10286","5":"17935","6":"4.2","7":"2.0","8":"23.3","9":"10.6","10":"99","_rn_":"92"},{"1":"no","2":"yes","3":"no","4":"3360","5":"4492","6":"4.7","7":"3.5","8":"14.7","9":"7.0","10":"90","_rn_":"93"},{"1":"no","2":"yes","3":"no","4":"1939","5":"3308","6":"5.1","7":"2.9","8":"17.1","9":"5.8","10":"65","_rn_":"94"},{"1":"no","2":"yes","3":"no","4":"2042","5":"1997","6":"3.3","7":"3.3","8":"8.0","9":"3.9","10":"49","_rn_":"95"},{"1":"no","2":"yes","3":"no","4":"2481","5":"3034","6":"3.9","7":"3.1","8":"8.8","9":"2.4","10":"32","_rn_":"96"},{"1":"no","2":"yes","3":"no","4":"1096","5":"1237","6":"1.8","7":"1.3","8":"7.1","9":"1.9","10":"15","_rn_":"97"},{"1":"no","2":"yes","3":"no","4":"1430","5":"1822","6":"4.0","7":"3.1","8":"13.8","9":"3.7","10":"45","_rn_":"98"},{"1":"no","2":"yes","3":"no","4":"2726","5":"3080","6":"2.1","7":"1.6","8":"20.6","9":"11.2","10":"82","_rn_":"99"},{"1":"no","2":"yes","3":"no","4":"4229","5":"7380","6":"5.5","7":"3.3","8":"19.5","9":"6.6","10":"65","_rn_":"100"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p>In this lecture we will go beyond simple pairwise regressions. Our goal is to find the drivers of the economic growth, which we define in the following way:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
dj &lt;- dj %&gt;% mutate(growth = log(gdp85) - log(gdp60))</code></pre>
</div>
<p>When we have a data set with multiple explanatory variables it makes a lot of sense to put them all in the model after preliminary data analysis:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
mod &lt;- lm(growth ~ gdpgrowth + popgrowth + invest + school + literacy60, data = dj)
summary(mod)</code></pre>
<pre><code>
Call:
lm(formula = growth ~ gdpgrowth + popgrowth + invest + school + 
    literacy60, data = dj)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.022616 -0.007598  0.001067  0.007442  0.023296 

Coefficients:
              Estimate Std. Error  t value Pr(&gt;|t|)    
(Intercept)  3.152e-03  4.388e-03    0.718    0.474    
gdpgrowth    2.497e-01  6.894e-04  362.210   &lt;2e-16 ***
popgrowth   -2.507e-01  1.288e-03 -194.538   &lt;2e-16 ***
invest       2.732e-04  1.981e-04    1.379    0.171    
school       6.760e-05  5.600e-04    0.121    0.904    
literacy60  -9.216e-05  5.758e-05   -1.601    0.113    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.01033 on 94 degrees of freedom
  (21 observations deleted due to missingness)
Multiple R-squared:  0.9995,    Adjusted R-squared:  0.9995 
F-statistic: 3.948e+04 on 5 and 94 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>As you see the <span class="math inline">\(R^2\)</span> in this model is almost 1. <span class="math inline">\(R^2\)</span> can be loosely interpreted of how good your model is. The higher the <span class="math inline">\(R^2\)</span>, the better the model. However values close to 1 are usually indication that model is too good to be true.</p>
<p>Let us leave only the two most significant variables in the model and see what that gives us. The standard output of <code>summary</code> can be made to look much better. There are various R packages which allows to do that. He re is how it looks from <strong>sjPlot</strong>:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
library(pander)
library(sjPlot)
mod1 &lt;- lm(growth ~ gdpgrowth + popgrowth, data = dj)
tab_model(mod1)</code></pre>
<table style="border-collapse:collapse; border:none;">
<tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">
 
</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
growth
</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">
Predictors
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
CI
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
p
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
(Intercept)
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.00
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.00 – 0.01
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.438
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
gdpgrowth
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.25
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.25 – 0.25
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
<strong>&lt;0.001
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
popgrowth
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.25
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.25 – -0.25
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
<strong>&lt;0.001
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">
Observations
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">
105
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;">
R<sup>2</sup> / R<sup>2</sup> adjusted
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3">
1.000 / 1.000
</td>
</tr>
</table>
</div>
<p><strong>pander</strong></p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
pander(mod1)</code></pre>
<table style="width:90%;">
<caption>Fitting linear model: growth ~ gdpgrowth + popgrowth</caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 15%" />
<col style="width: 18%" />
<col style="width: 13%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"> </th>
<th style="text-align: center;">Estimate</th>
<th style="text-align: center;">Std. Error</th>
<th style="text-align: center;">t value</th>
<th style="text-align: center;">Pr(&gt;|t|)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>(Intercept)</strong></td>
<td style="text-align: center;">0.002342</td>
<td style="text-align: center;">0.003008</td>
<td style="text-align: center;">0.7785</td>
<td style="text-align: center;">0.4381</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>gdpgrowth</strong></td>
<td style="text-align: center;">0.2499</td>
<td style="text-align: center;">0.0005543</td>
<td style="text-align: center;">450.9</td>
<td style="text-align: center;">4.069e-170</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>popgrowth</strong></td>
<td style="text-align: center;">-0.2504</td>
<td style="text-align: center;">0.001039</td>
<td style="text-align: center;">-241.1</td>
<td style="text-align: center;">2.097e-142</td>
</tr>
</tbody>
</table>
</div>
<p>Note that both coefficients are 0.25. Let us examine this in more detail. The variable gdpgrowth is the average growth of gdp expressed in percentages and variable population is the average growth of working population again in percentages. The variable growth is simply a growth per gdp capita from the year 1960 to the year 1985. It was calculated using logs:</p>
<p><span class="math display">\[
growth = \log\frac{gdp_{85}}{gdp_{60}}
\]</span> Now gdp per capita is simply gdp divided per population. Let us put it in the formula. We will use the all caps to distinguish between per capita and total gdp: <span class="math display">\[
growth = \log\frac{\frac{GDP_{85}}{pop_{85}}}{\frac{GDP_{60}}{pop60}} = \log\frac{GPD_{85}}{GDP_{60}}- \log\frac{pop_{85}}{pop_{60}}
\]</span></p>
<p>The average growth is simply the average of yearly growths, so we get</p>
<p><span class="math display">\[
GPD_{avggrowth} = \frac{1}{25}\left(\log\frac{GDP_{61}}{GDP_{60}} + ... + \log\frac{GDP_{85}}{GDP_{84}}\right) = \frac{1}{25}\log\frac{GPD_{85}}{GDP_{60}} 
\]</span> And we finally can see why our model is so good. It is very good because growth is simply 25 times average growth minus the population growth by design. (The coefficient in regression is 0.25 not 25, why?)</p>
<p>Adding the variables which have an deterministic algebraic relationship in to the regression model is one of the common pitfalls in modelling.</p>
<p>Since all our variables are in percentage points let us convert the growth to percentage points too. This can be done either by redefining the variable or doing that directly in the formula. For the transformations in R it is necessary to envelope them in a function <code>I</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
mod2 &lt;- lm(I(100*growth) ~ popgrowth + invest + school + literacy60, data = dj)
tab_model(mod2)</code></pre>
<table style="border-collapse:collapse; border:none;">
<tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">
 
</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
I(100 * growth)
</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">
Predictors
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
CI
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
p
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
(Intercept)
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
5.62
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-26.75 – 37.98
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.731
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
popgrowth
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-7.15
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-15.93 – 1.63
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.109
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
invest
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.91
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
1.57 – 4.25
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
<strong>&lt;0.001
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
school
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.24
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-1.87 – 6.35
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.282
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
literacy60
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.20
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.62 – 0.23
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.362
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">
Observations
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">
100
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;">
R<sup>2</sup> / R<sup>2</sup> adjusted
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3">
0.335 / 0.307
</td>
</tr>
</table>
</div>
<p><span class="math inline">\(R^2\)</span> is not that high, and only one coefficient is significant. Significance should be treated with care, as it is valid only when the certain assumptions are met.</p>
<p>If we ignore the significance the model interpretation is quite a straightforward one. Since all our variables are in percentage points, the coefficients show the effect of change in one percentage point.</p>
<p>We see that if all the variables are zeros then country gdp per capita grew 5.62% over 25 years. Each additional percentage point of population growth sets back the country growth by 7.15 percentage points. Each additional investment ratio to gdp percentage point adds 2.91 perecentage points and so on.</p>
<p>This model was fitted to all of the countries. Since we have some country groupings it is always good to check whether the same model applies for all of them.</p>
<p>Let us add the fit and residuals into the original data set</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
dj1 &lt;- dj %&gt;% mutate(fitted = NA, residuals = NA)

dj1$fitted[-mod2$na.action] &lt;- fitted(mod2)
dj1$residuals[-mod2$na.action] &lt;- residuals(mod2)

ggplot(aes(x = 100*growth, y = residuals), data = dj1) + geom_point()</code></pre>
<p><img src="lecture8_files/figure-html5/unnamed-chunk-7-1.png" width="624" /></p>
</div>
<p>This graph immediately shows why it is very important to look into the regression residuals. We see clearly that there is a very visible relationship between the residuals and growth. One of the main assumptions of the linear regression model is that the remaining error is a noise (white noise, zero mean iid symmetric random variables, etc). Noise should not have any structure. If residuals have structure this means that there is a some variable(s) that we missed.</p>
<p>One of the simple checks we can do is simply calculate correlation of the residuals all the variables:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
corrplot::corrplot(dj1 %&gt;% select(residuals,popgrowth, invest, school, gdpgrowth,literacy60, gdp60, gdp85) %&gt;% cor(use = &quot;pairwise&quot;), method = &quot;number&quot;)</code></pre>
<p><img src="lecture8_files/figure-html5/unnamed-chunk-8-1.png" width="624" /></p>
</div>
<p>Residuals have zero correlation with the variables in regression, high correlation with gdpgrowth, medium correlation with gdp60 and low correlation with gdp85.</p>
<p>Let us add the gdp60 to the model.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
mod3 &lt;- lm(I(100*growth) ~ gdp60+popgrowth + invest + school + literacy60, data = dj)
tab_model(mod2, mod3)</code></pre>
<table style="border-collapse:collapse; border:none;">
<tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">
 
</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
I(100 * growth)
</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
I(100 * growth)
</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">
Predictors
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
CI
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
p
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
CI
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col7">
p
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
(Intercept)
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
5.62
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-26.75 – 37.98
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.731
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-14.68
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-45.42 – 16.06
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
0.346
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
popgrowth
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-7.15
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-15.93 – 1.63
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.109
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.90
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-7.82 – 9.62
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
0.839
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
invest
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.91
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
1.57 – 4.25
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
<strong>&lt;0.001
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.62
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
1.39 – 3.84
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
<strong>&lt;0.001
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
school
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.24
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-1.87 – 6.35
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.282
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
3.85
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.05 – 7.65
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
<strong>0.047</strong>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
literacy60
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.20
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.62 – 0.23
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.362
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.05
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.44 – 0.34
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
0.810
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
gdp60
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.00
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.00 – -0.00
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7">
<strong>&lt;0.001
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">
Observations
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">
100
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">
100
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;">
R<sup>2</sup> / R<sup>2</sup> adjusted
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3">
0.335 / 0.307
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="3">
0.456 / 0.427
</td>
</tr>
</table>
</div>
<p>gdp60 is measured is immediately very significant. However the interpretation of the coefficient would be a percentage point for every gdp per capita dollar. Which does not make a lot of sense. If we change it to log then the interpretation would be a percentage point of change in gdp per capita in percent.</p>
<p>Let us compare the three models and change the output to make the comparison easier.</p>
<div class="layout-chunk" data-layout="l-body">

<pre class="r"><code>
mod4 &lt;- lm(I(100*growth) ~ log(gdp60)+popgrowth + invest + school + literacy60, data = dj)
tab_model(mod2, mod3, mod4, p.style = &quot;asterisk&quot;, show.ci = FALSE)</code></pre>
<table style="border-collapse:collapse; border:none;">
<tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">
 
</th>
<th colspan="1" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
I(100 * growth)
</th>
<th colspan="1" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
I(100 * growth)
</th>
<th colspan="1" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
I(100 * growth)
</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">
Predictors
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
(Intercept)
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
5.62 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-14.68 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
178.71 <sup>***</sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
popgrowth
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-7.15 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.90 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-1.73 <sup></sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
invest
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.91 <sup>***</sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.62 <sup>***</sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
3.04 <sup>***</sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
school
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.24 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
3.85 <sup>*</sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
5.23 <sup>**</sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
literacy60
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.20 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.05 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.20 <sup></sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
gdp60
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.00 <sup>***</sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
gdp60 [log]
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-29.17 <sup>***</sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">
Observations
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="1">
100
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="1">
100
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="1">
100
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;">
R<sup>2</sup> / R<sup>2</sup> adjusted
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="1">
0.335 / 0.307
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="1">
0.456 / 0.427
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="1">
0.477 / 0.449
</td>
</tr>
<tr>
<td colspan="4" style="font-style:italic; border-top:double black; text-align:right;">
<ul>
<li>p&lt;0.05   ** p&lt;0.01   *** p&lt;0.001
</td>
</tr></li>
</ul>
</table>
</div>
<p>As we can see the adding of the significant variable changed the coefficients of the regression and their signifance. Let us add the residuals of all the models and compare the plots</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
dj1 &lt;- dj %&gt;% mutate(residuals2 = NA, residuals3 = NA, residuals4 = NA)

dj1$residuals2[-mod2$na.action] &lt;- residuals(mod2)
dj1$residuals3[-mod3$na.action] &lt;- residuals(mod3)
dj1$residuals4[-mod4$na.action] &lt;- residuals(mod4)


ggplot(aes(x = 100*growth, y = residuals4, colour= oecd), data = dj1) + geom_point()</code></pre>
<p><img src="lecture8_files/figure-html5/unnamed-chunk-11-1.png" width="624" /></p>
</div>
<p>The situation has improved somewhat but we are still missing some important variable.</p>
<p>Since we have some grouping variables let us see whether they can improve the situation. Let us include <code>oecd</code> in the model.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
mod5 &lt;- lm(I(100*growth) ~ log(gdp60)*oecd + popgrowth + invest + school+ literacy60, data = dj)
summary(mod5)</code></pre>
<pre><code>
Call:
lm(formula = I(100 * growth) ~ log(gdp60) * oecd + popgrowth + 
    invest + school + literacy60, data = dj)

Residuals:
    Min      1Q  Median      3Q     Max 
-88.566 -18.229   1.632  17.343  96.813 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        178.7780    40.0734   4.461 2.30e-05 ***
log(gdp60)         -29.9941     6.5665  -4.568 1.53e-05 ***
oecdyes            180.1791   133.2572   1.352   0.1797    
popgrowth            1.3740     5.4395   0.253   0.8011    
invest               2.8592     0.6110   4.680 9.84e-06 ***
school               5.0154     1.9351   2.592   0.0111 *  
literacy60           0.2131     0.2051   1.039   0.3014    
log(gdp60):oecdyes -19.1351    15.5645  -1.229   0.2221    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 34.11 on 92 degrees of freedom
  (21 observations deleted due to missingness)
Multiple R-squared:  0.4923,    Adjusted R-squared:  0.4536 
F-statistic: 12.74 on 7 and 92 DF,  p-value: 2.452e-11</code></pre>
</div>
<p>When factor variable is included in this way, R converts the factor variable into dummy variables, one variable for each factor level. The dummy variable coresponding to the factor level get values 1 for the rows which had that factor level and zero for all the others. Such created variables sum to one (why?) so one is dropped. In the variable <code>oecd</code> case, we see that level no is dropped.</p>
<p>The variable <code>log(gdp60):oecdyes</code> is the product of variables <code>log(gdp60)</code> and dummy variable equaling 1 for countries belonging to oecd.</p>
<p>Here is how the new model compares to the old ones:</p>
<div class="layout-chunk" data-layout="l-body">

<pre class="r"><code>
tab_model(mod2, mod4, mod5, p.style = &quot;asterisk&quot;, show.ci = FALSE)</code></pre>
<table style="border-collapse:collapse; border:none;">
<tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">
 
</th>
<th colspan="1" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
I(100 * growth)
</th>
<th colspan="1" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
I(100 * growth)
</th>
<th colspan="1" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">
I(100 * growth)
</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">
Predictors
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">
Estimates
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
(Intercept)
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
5.62 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
178.71 <sup>***</sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
178.78 <sup>***</sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
popgrowth
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-7.15 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-1.73 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
1.37 <sup></sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
invest
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.91 <sup>***</sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
3.04 <sup>***</sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.86 <sup>***</sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
school
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
2.24 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
5.23 <sup>**</sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
5.02 <sup>*</sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
literacy60
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-0.20 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.20 <sup></sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
0.21 <sup></sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
gdp60 [log]
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-29.17 <sup>***</sup>
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-29.99 <sup>***</sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
oecd [yes]
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
180.18 <sup></sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">
gdp60 [log] * oecd [yes]
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">
-19.14 <sup></sup>
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">
Observations
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="1">
100
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="1">
100
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="1">
100
</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;">
R<sup>2</sup> / R<sup>2</sup> adjusted
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="1">
0.335 / 0.307
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="1">
0.477 / 0.449
</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="1">
0.492 / 0.454
</td>
</tr>
<tr>
<td colspan="4" style="font-style:italic; border-top:double black; text-align:right;">
<ul>
<li>p&lt;0.05   ** p&lt;0.01   *** p&lt;0.001
</td>
</tr></li>
</ul>
</table>
</div>
<p>Unfortunately there is no marked improvement in the results. Create residual plot for this model to see that.</p>
<p>This approach were we try to add variables and see the resulting model can be automated by adding various combinations of the variables and their transformations. Package <strong>leaps</strong> for example can be used to do that. However models created in such a way should only be used for their predictive power and measured as such.</p>
<p>Instead of trying out various combinations based on your intuition or on automation it is advisable to look into available research.</p>
<p>This particular dataset was explored by economists S. N. Durlauf and P. A. Johnson in the article <a href="https://ethz.ch/content/dam/ethz/special-interest/mtec/cer-eth/resource-econ-dam/documents/research/ws-and-conf/papageorgiou-2007/durlauf_johnson_95.pdf">Multiple Regimes and Cross-Country Growth Behaviour</a></p>
<p>The reproduction of the results of that article was done by R. Koenker and A. Zeileis in the article <a href="https://eeecon.uibk.ac.at/~zeileis/papers/Koenker+Zeileis-2009.pdf">On Reproducible Econometric Research</a>.</p>
<p>Given the analysis already made try to estimate the models in the articles and see whether they managed to solve the problem of the ommited variable.</p>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
